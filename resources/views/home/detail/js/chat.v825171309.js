(function(a,b){a.XmsChat=b(a,{})})(this,function(window,Chat){var KEY_LOCALCACHE_XMS_CHAT_DEVICE_ID="KEY_LOCALCACHE_XMS_CHAT_DEVICE_ID";var KEY_LOCALCACHE_XMS_CHAT_TIMESTAMP="KEY_LOCALCACHE_XMS_CHAT_TIMESTAMP";var CHAT_URL="http://s1.xiaomishu.com/chat/pc/chat/1/index.html";var HTTP_CHK_URL="http://chat.xiaomishu.com/usermsgnum";var opts={showIcon:true,userToken:"",cityId:"",lon:0,lat:0,deviceId:"",currentPage:"",currentPageUrl:"",width:400,height:500,onOpenChat:null};var jqPanel=null;Chat.init=function(options){opts=extend(opts,options);if(opts.showIcon){createIcon()}};Chat.open=function(){navToChatPage()};function chkHasNewMsg(){}function notifyHasNewMsg(num){}function createIcon(){var nu=navigator.userAgent;if(/msie 6/i.test(nu)){return}if(jqPanel){return}var bs="data:image/png;base64,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";var s="";s=s+"position: fixed;";s=s+"z-index: 10000000;";s=s+"color: #F34747;";s=s+"font-size:15px;";s=s+"text-align:right;";s=s+"width: 50px;";s=s+"height: 50px;";s=s+"margin: auto;";s=s+"right: 3px;";s=s+"top: 0px;";s=s+"*top: 200px;";s=s+"bottom: 0px;";s=s+"cursor: pointer;";var pid="xms_chat_plugin_div_icon";var h="";h=h+"<div id='"+pid+"' style='"+s+"'>";h=h+" <img style='border:0;margin:0;padding:0;width:100%;height:100%;' src='"+bs+"'>";h=h+"</div>";$$("body")[0].appendHTML(h);jqPanel=$(pid);jqPanel.addEvent("click",function(){navToChatPage()})}function setCookie(name,value){try{var Days=3000;var exp=new Date();exp.setTime(exp.getTime()+Days*24*60*60*1000);document.cookie=name+"="+escape(value)+";expires="+exp.toGMTString()}catch(e){}}function getCookie(name){try{var reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");var attr=document.cookie.match(reg);if(attr){return unescape(attr[2])}else{return""}}catch(e){return""}}function navToChatPage(){if(opts.onOpenChat){try{opts.onOpenChat()}catch(e){}}if(!opts.deviceId){if(window.localStorage){var s=window.localStorage.getItem(KEY_LOCALCACHE_XMS_CHAT_DEVICE_ID);if(!s){s=randomStr();try{window.localStorage.setItem(KEY_LOCALCACHE_XMS_CHAT_DEVICE_ID,s)}catch(e){}}opts.deviceId=s}else{var s=getCookie(KEY_LOCALCACHE_XMS_CHAT_DEVICE_ID);if(!s){s=randomStr();setCookie(KEY_LOCALCACHE_XMS_CHAT_DEVICE_ID,s)}opts.deviceId=s}}if(!opts.currentPage){opts.currentPage=document.title}if(!opts.currentPageUrl){opts.currentPageUrl=window.location.href}var p={deviceId:opts.deviceId,userToken:opts.userToken,cityId:opts.cityId,currentPage:opts.currentPage,currentPageUrl:opts.currentPageUrl,lon:opts.lon,lat:opts.lat};var sh=window.screen.availHeight;sh=(sh-opts.height)/2;var sw=window.screen.availWidth;sw=(sw-opts.width)/2;var url=CHAT_URL+"?pp="+encode(JSON.stringify(p))+"&rm="+randomStr();window.open(url,"","top="+sh+",left="+sw+",height="+opts.height+",width="+opts.width+",toolbar=no,menubar=no,scrollbars=no,resizable=no,location=no,status=no")}function saveTimestamp(){if(window.localStorage){var s=new Date().getTime();try{window.localStorage.setItem(KEY_LOCALCACHE_XMS_CHAT_TIMESTAMP,s)}catch(e){}}}function encode(str){str=(str+"").toString();if(!str){return""}return encodeURIComponent(str).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}function chkTimestampIsActive(){if(window.localStorage){var s=window.localStorage.getItem(KEY_LOCALCACHE_XMS_CHAT_TIMESTAMP);if(s){var t1=parseInt(s,10);var t2=new Date().getTime();var c=t2-t1;if(c<259200000){return true}}}return false}function extend(des,src){for(var key in src){if(des.hasOwnProperty(key)){des[key]=src[key]}}return des}function randomStr(){var max=1234567890;var min=0;var num=min+Math.floor(Math.random()*(max-min+1));num=num+new Date().getTime();return"r"+num}var JSON=window.JSON;if(typeof JSON!=="object"){JSON={}}(function(){var rx_one=/^[\],:{}\s]*$/;var rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rx_four=/(?:^|:|,)(?:\s*\[)+/g;var rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(n){return n<10?"0"+n:n}function this_value(){return this.valueOf()}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};Boolean.prototype.toJSON=this_value;Number.prototype.toJSON=this_value;String.prototype.toJSON=this_value}var gap;var indent;var meta;var rep;function quote(string){rx_escapable.lastIndex=0;return rx_escapable.test(string)?'"'+string.replace(rx_escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i;var k;var v;var length;var mind=gap;var partial;var value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k;var v;var value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);rx_dangerous.lastIndex=0;if(rx_dangerous.test(text)){text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,""))){j=eval("("+text+")");return(typeof reviver==="function")?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());return Chat});